{% extends 'base.html' %}
{% load static %}

{% block title %}Subir Excel - Azotea{% endblock %}

{% block sidebar %}
<div class="contents">
  {% include 'componentes/sidebar.html' %}
</div>
{% endblock %}

{% block content %}
<div id="content" class="w-full max-w-screen-2xl mx-auto px-4 py-6 md:ml-72">
  <h1 class="text-xl sm:text-2xl md:text-3xl font-bold text-gray-800 mb-6">
    Subir Excel â€” Azotea
  </h1>

  <div class="grid grid-cols-1 gap-6 md:grid-cols-3 items-start">
    <!-- Imagen -->
    <div class="flex items-center justify-center">
      <img
        class="w-40 md:w-56 h-auto rounded-lg shadow-lg"
        src="{% static 'imagenes/adr_icon.png' %}"
        alt="Imagen Azotea ADR"
      >
    </div>

    <!-- Formulario -->
    <div class="md:col-span-2">
      <div class="w-full max-w-xl p-6 md:p-8 bg-gradient-to-r from-white to-gray-300 rounded-lg shadow-xl">
        <h2 class="text-black text-xl md:text-2xl font-semibold mb-4">
          Subir Archivo Excel para Azotea
        </h2>

        {% if form.errors %}
          <div class="mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded">
            <p class="font-bold mb-2">Errores:</p>
            <ul class="list-disc pl-5">
              {% for field, errors in form.errors.items %}
                {% for error in errors %}
                  <li>{{ field }}: {{ error }}</li>
                {% endfor %}
              {% endfor %}
            </ul>
          </div>
        {% endif %}

        <form method="post" enctype="multipart/form-data" action="{% url 'upload_excel_azotea' %}">
          {% csrf_token %}
          <div class="mb-4">
            <label for="excel_file" class="block font-semibold text-sm text-black">Seleccionar archivo Excel:</label>
            <input
              type="file" id="excel_file" name="excel_file" accept=".xlsx, .xls" required
              class="w-full bg-gray-200 rounded-md py-2 px-3 mt-2 text-gray-900 shadow-sm"
            >
          </div>

          <div class="flex justify-between mt-6">
            <a href="{% url 'azotea_adr' %}"
               class="bg-red-900 hover:bg-red-800 text-white font-medium py-2 px-3 rounded-lg transition duration-200 text-sm text-center">
              Regresar
            </a>
            <button type="submit"
                    class="bg-red-900 hover:bg-red-800 text-white font-medium py-2 px-3 rounded-lg transition duration-200 text-sm text-center">
              Subir Archivo
            </button>
          </div>
        </form>
      </div>

      {% if messages %}
        <div class="mt-6 space-y-3">
          {% for message in messages %}
            <div class="p-4 rounded shadow
                        {% if message.tags == 'success' %} bg-green-100 border border-green-400 text-green-700
                        {% elif message.tags == 'error' %} bg-red-100 border border-red-400 text-red-700
                        {% elif message.tags == 'info' %} bg-blue-100 border border-blue-400 text-blue-700
                        {% else %} bg-gray-100 border border-gray-400 text-gray-700 {% endif %}">
              <strong class="font-bold">{{ message.tags|title }}!</strong>
              <span class="block sm:inline ml-1">{{ message }}</span>
            </div>
          {% endfor %}
        </div>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
